<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Menú Semanal | Gastro Works</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" href="/front-end/css/theme.css">
</head>

<body>

    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg bg-vino">
        <div class="container">

            <a class="navbar-brand d-flex align-items-center" href="/front-end/pagina-principal.html">
                <img src="/imgs/logo.png" alt="Gastro Works" class="logo-navbar">
            </a>

            <button class="navbar-toggler" type="button"
                data-bs-toggle="collapse" data-bs-target="#navbarMenu"
                aria-controls="navbarMenu" aria-expanded="false"
                aria-label="Mostrar menú">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse justify-content-end" id="navbarMenu">
                <ul class="navbar-nav align-items-lg-center">

                    <li class="nav-item">
                        <a class="nav-link" href="/front-end/pagina-principal.html">Inicio</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="/front-end/buscar-recetas.html">Recetas</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link active" href="/front-end/planificador/planificador.html">Planificador</a>
                    </li>

                    <li class="nav-item ms-lg-3 mt-2 mt-lg-0">
                        <a class="btn btn-sm btn-light rounded-pill fw-semibold" href="/front-end/login.html">
                            Iniciar sesión
                        </a>
                    </li>

                </ul>
            </div>

        </div>
    </nav>

    <!-- CONTENIDO -->
    <div class="container py-4">

        <h2 class="text-center fw-bold mb-4" style="color: var(--vino);">
            Menú Semanal
        </h2>

        <p class="text-center mb-4">
            Selecciona las recetas que deseas preparar cada día de la semana.
        </p>

        <!-- TABLA RESPONSIVA -->
        <div class="table-responsive">
            <table class="table table-bordered align-middle bg-white shadow-sm">
                <thead class="text-center text-white" style="background: var(--vino);">
                    <tr>
                        <th scope="col">Día</th>
                        <th scope="col">Receta seleccionada</th>
                    </tr>
                </thead>
                <tbody>

                    <!-- DÍAS DE LA SEMANA -->
                    <tr>
                        <td class="fw-semibold">Lunes</td>
                        <td><input type="text" class="form-control input-custom receta-dia" placeholder="Buscar receta…" aria-label="Receta lunes"></td>
                    </tr>

                    <tr>
                        <td class="fw-semibold">Martes</td>
                        <td><input type="text" class="form-control input-custom receta-dia" placeholder="Buscar receta…" aria-label="Receta martes"></td>
                    </tr>

                    <tr>
                        <td class="fw-semibold">Miércoles</td>
                        <td><input type="text" class="form-control input-custom receta-dia" placeholder="Buscar receta…" aria-label="Receta miércoles"></td>
                    </tr>

                    <tr>
                        <td class="fw-semibold">Jueves</td>
                        <td><input type="text" class="form-control input-custom receta-dia" placeholder="Buscar receta…" aria-label="Receta jueves"></td>
                    </tr>

                    <tr>
                        <td class="fw-semibold">Viernes</td>
                        <td><input type="text" class="form-control input-custom receta-dia" placeholder="Buscar receta…" aria-label="Receta viernes"></td>
                    </tr>

                    <tr>
                        <td class="fw-semibold">Sábado</td>
                        <td><input type="text" class="form-control input-custom receta-dia" placeholder="Buscar receta…" aria-label="Receta sábado"></td>
                    </tr>

                    <tr>
                        <td class="fw-semibold">Domingo</td>
                        <td><input type="text" class="form-control input-custom receta-dia" placeholder="Buscar receta…" aria-label="Receta domingo"></td>
                    </tr>

                </tbody>
            </table>
        </div>

        <!-- BOTÓN GENERAR LISTA -->
        <div class="text-center mt-4">
            <button id="btnGenerarLista" class="btn btn-vino px-4 py-2 fw-semibold">
                Generar lista de compras
            </button>
        </div>

    </div>

    <script>
        /* =====================================================
           1. GUARDAR RECETAS SELECCIONADAS
        ===================================================== */

        document.getElementById("btnGenerarLista").addEventListener("click", () => {

            const recetas = Array.from(document.querySelectorAll(".receta-dia"))
                .map(i => i.value.trim())
                .filter(i => i !== "");

            if (recetas.length === 0) {
                alert("Por favor, selecciona al menos una receta antes de generar la lista.");
                return;
            }

            /* =====================================================
               2. AQUÍ se simula una lista de ingredientes.
               Luego se reemplaza por llamada al backend.
            ===================================================== */
            const listaSimulada = [
                "2 tazas de harina",
                "1 huevo",
                "1 huevo",
                "200 g de pasta",
                "1 cebolla",
                "1 cebolla"
            ];

            // Guardamos en localStorage para lista-compras.html
            localStorage.setItem("listaCompras", JSON.stringify(listaSimulada));

            // Redirigir
            window.location.href = "/front-end/planificador/lista-compras.html";
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>

</body>

</html>